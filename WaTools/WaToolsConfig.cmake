include(${CMAKE_CURRENT_LIST_DIR}/functions_compile.cmake)
include(${CMAKE_CURRENT_LIST_DIR}/functions_deploy.cmake)
include(${CMAKE_CURRENT_LIST_DIR}/functions_git.cmake)
include(${CMAKE_CURRENT_LIST_DIR}/functions_qml.cmake)
include(${CMAKE_CURRENT_LIST_DIR}/functions_target.cmake)

foreach(COMPONENT ${WaTools_FIND_COMPONENTS})
   #message(STATUS "NEED WaTools component: ${COMPONENT}")
   if(IOS)
      if(TARGET WaTools${COMPONENT})
         message(STATUS "REUSE TARGET WaTools${COMPONENT}")
         link_libraries(WaTools${COMPONENT})
      else()
         message(STATUS "ADD WaTools${COMPONENT} as subdirectory")
         set(CMAKE_XCODE_ATTRIBUTE_EXCLUDED_ARCHS[sdk=iphonesimulator*] "arm64")      
         add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/../WaTools${COMPONENT} WaTools${COMPONENT})
      endif()
   elseif(ANDROID)
      if(TARGET WaTools${COMPONENT})
         message(STATUS "REUSE TARGET WaTools${COMPONENT}")
         link_libraries(WaTools${COMPONENT})
      else()
         message(STATUS "ADD WaTools${COMPONENT} as subdirectory")
         set(CMAKE_XCODE_ATTRIBUTE_EXCLUDED_ARCHS[sdk=iphonesimulator*] "arm64")      
         add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/../WaTools${COMPONENT} WaTools${COMPONENT})
      endif()
   endif()
   find_package(WaTools${COMPONENT} REQUIRED)
endforeach()